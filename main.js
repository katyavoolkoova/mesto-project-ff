(()=>{"use strict";var e=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");r(t)}},t=function(t){t.classList.add("popup_is-opened"),document.addEventListener("keydown",e)},r=function(t){t.classList.remove("popup_is-opened"),document.removeEventListener("keydown",e)},n=function(e){e.querySelector(".popup__close").addEventListener("click",(function(){r(e)})),e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&r(e)}))};function o(e){e.remove()}function a(e){e.classList.contains("card__like-button_is-active"),e.classList.toggle("card__like-button_is-active")}var s=document.querySelector("#card-template").content;function l(e,t){var r=t.removeNodeCallback,n=t.handleOpenImageCallback,o=t.likeCardCallback,a=s.querySelector(".card").cloneNode(!0),l=a.querySelector(".card__delete-button"),i=a.querySelector(".card__like-button"),c=a.querySelector(".card__image");return a.querySelector(".card__title").textContent=e.name,c.src=e.link,c.alt=e.name,l.addEventListener("click",(function(){r(a)})),c.addEventListener("click",(function(){n(e)})),i.addEventListener("click",(function(){o(i)})),a}var i,c,u,d,p,m,v,f=function(e,t,r){var n=r.inputErrorClass,o=r.errorClass,a=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),a.classList.remove(o),a.textContent=""},C=function(e,t,r){var n=r.inactiveButtonClass;!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n)):(t.disabled=!0,t.classList.add(n))},_=function(e,t){var r=t.submitButtonSelector,n=t.inactiveButtonClass,o=t.inputSelector,a=t.inputErrorClass,s=t.errorClass,l=Array.from(e.querySelectorAll(o)),i=e.querySelector(r);l.forEach((function(t){f(e,t,{inputErrorClass:a,errorClass:s})})),C(l,i,{inactiveButtonClass:n})},y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},k=document.querySelector(".places__list"),S=document.forms["edit-profile"],b=document.forms["new-place"],E=b.elements["place-name"],q=b.elements.link,L=document.querySelector(".popup_type_new-card"),g=document.querySelector(".popup_type_edit"),h=document.querySelector(".popup_type_image"),x=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__edit-button"),j=h.querySelector(".popup__caption"),A=h.querySelector(".popup__image"),w=document.querySelector(".profile__title"),M=document.querySelector(".profile__description"),N=S.elements.name,D=S.elements.description;function I(e){var r=e.name,n=e.link;A.src=n,A.alt=r,j.textContent=r,t(h)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=l(e,{removeNodeCallback:o,likeCardCallback:a,handleOpenImageCallback:I});k.append(t)})),n(L),n(g),n(h),B.addEventListener("click",(function(){t(g),N.value=w.textContent,D.value=M.textContent,_(S,y)})),x.addEventListener("click",(function(){b.reset(),_(b,y),t(L)})),S.addEventListener("submit",(function(e){e.preventDefault();var t=N.value,n=D.value;w.textContent=t,M.textContent=n,r(g)})),b.addEventListener("submit",(function(e){e.preventDefault();var t=l({name:E.value,link:q.value},{removeNodeCallback:o,likeCardCallback:a,handleOpenImageCallback:I});k.prepend(t),r(L),E.value="",q.value=""})),c=(i=y).formSelector,u=i.inputSelector,d=i.submitButtonSelector,p=i.inactiveButtonClass,m=i.inputErrorClass,v=i.errorClass,Array.from(document.querySelectorAll(c)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=t.inputSelector,n=t.submitButtonSelector,o=t.inputErrorClass,a=t.inactiveButtonClass,s=t.errorClass,l=Array.from(e.querySelectorAll(r)),i=e.querySelector(n);C(l,i,{inactiveButtonClass:a}),l.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r){var n=r.inputErrorClass,o=r.errorClass;t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?f(e,t,{errorClass:o,inputErrorClass:n}):function(e,t,r){var n=r.inputErrorClass,o=r.errorClass,a=r.errorMessage,s=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n),s.classList.add(o),s.textContent=a}(e,t,{errorMessage:t.validationMessage,errorClass:o,inputErrorClass:n})}(e,t,{inputErrorClass:o,errorClass:s}),C(l,i,{inactiveButtonClass:a})}))}))}(e,{inputSelector:u,submitButtonSelector:d,inactiveButtonClass:p,inputErrorClass:m,errorClass:v})}))})();