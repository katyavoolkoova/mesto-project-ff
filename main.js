(()=>{"use strict";var e=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");n(t)}},t=function(t){t.classList.add("popup_is-opened"),document.addEventListener("keydown",e)},n=function(t){t.classList.remove("popup_is-opened"),document.removeEventListener("keydown",e)},r=function(e){e.querySelector(".popup__close").addEventListener("click",(function(){n(e)})),e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&n(e)}))};function o(e){e.remove()}function a(e){e.classList.contains("card__like-button_is-active"),e.classList.toggle("card__like-button_is-active")}var l=document.querySelector("#card-template").content;function s(e,t){var n=t.removeNodeCallback,r=t.handleOpenImageCallback,o=t.likeCardCallback,a=l.querySelector(".card").cloneNode(!0),s=a.querySelector(".card__delete-button"),i=a.querySelector(".card__like-button"),u=a.querySelector(".card__image");return a.querySelector(".card__title").textContent=e.name,u.src=e.link,u.alt=e.name,s.addEventListener("click",(function(){n(a)})),u.addEventListener("click",(function(){r(e)})),i.addEventListener("click",(function(){o(i)})),a}var i,u,c,p,d,m,_,v=function(e){var t=e.inputList,n=e.buttonElement;!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(n.disabled=!1,n.classList.remove("popup__button_disabled")):(n.disabled=!0,n.classList.add("popup__button_disabled"))},f=function(e){var t=e.formElement,n=e.inputElement,r=e.errorClass,o=t.querySelector(".".concat(n.id,"-error"));o.classList.remove(r),o.textContent="",n.classList.remove("popup__input_type_error")},y=function(e,t){var n=t.submitButtonSelector,r=t.inactiveButtonClass,o=t.inputErrorClass,a=t.errorClass,l=Array.from(e.querySelectorAll(".popup__input")),s=e.querySelector(n);l.forEach((function(t){f({formElement:e,inputElement:t,inputErrorClass:o,errorClass:a})})),v({inputList:l,buttonElement:s,inactiveButtonClass:r})},C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},E=document.querySelector(".places__list"),k=document.forms["edit-profile"],b=document.forms["new-place"],S=b.elements["place-name"],L=b.elements.link,q=document.querySelector(".popup_type_new-card"),g=document.querySelector(".popup_type_edit"),h=document.querySelector(".popup_type_image"),x=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__edit-button"),j=h.querySelector(".popup__caption"),w=h.querySelector(".popup__image"),A=document.querySelector(".profile__title"),M=document.querySelector(".profile__description"),N=k.elements.name,D=k.elements.description;function I(e){var n=e.name,r=e.link;w.src=r,w.alt=n,j.textContent=n,t(h)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=s(e,{removeNodeCallback:o,likeCardCallback:a,handleOpenImageCallback:I});E.append(t)})),r(q),r(g),r(h),B.addEventListener("click",(function(){t(g),N.value=A.textContent,D.value=M.textContent,y(k,C)})),x.addEventListener("click",(function(){b.reset(),y(b,C),t(q)})),k.addEventListener("submit",(function(e){e.preventDefault();var t=N.value,r=D.value;A.textContent=t,M.textContent=r,n(g)})),b.addEventListener("submit",(function(e){e.preventDefault();var t=s({name:S.value,link:L.value},{removeNodeCallback:o,likeCardCallback:a,handleOpenImageCallback:I});E.prepend(t),n(q),S.value="",L.value=""})),u=(i=C).formSelector,c=i.inputSelector,p=i.submitButtonSelector,d=i.inactiveButtonClass,m=i.inputErrorClass,_=i.errorClass,document.querySelectorAll(u).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=e.formElement,n=e.inputErrorClass,r=e.submitButtonSelector,o=e.errorClass,a=Array.from(t.querySelectorAll(".popup__input")),l=t.querySelector(r);v({inputList:a,buttonElement:l}),a.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.formElement,n=e.inputElement,r=e.inputErrorClass,o=e.errorClass;n.validity.patternMismatch?n.setCustomValidity(n.dataset.errorMessage):n.setCustomValidity(""),n.validity.valid?f({formElement:t,inputElement:n,errorClass:o,inputErrorClass:r}):function(e){var t=e.inputElement,n=e.errorClass,r=e.errorMessage,o=e.formElement.querySelector(".".concat(t.id,"-error"));o.classList.add(n),o.textContent=r,t.classList.add("popup__input_type_error")}({formElement:t,inputElement:n,errorMessage:n.validationMessage,errorClass:o,inputErrorClass:r})}({formElement:t,inputElement:e,inputErrorClass:n,errorClass:o}),v({inputList:a,buttonElement:l})}))}))}({formElement:e,inputSelector:c,submitButtonSelector:p,inactiveButtonClass:d,inputErrorClass:m,errorClass:_})}))})();